<svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bgGrad4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="url(#bgGrad4)"/>
  
  <!-- Terminal window -->
  <g transform="translate(50, 30)">
    <rect x="0" y="0" width="700" height="340" rx="10" fill="#1e1e2e" stroke="#45475a" stroke-width="2"/>
    
    <!-- Title bar -->
    <rect x="0" y="0" width="700" height="35" rx="10" fill="#181825"/>
    <rect x="0" y="25" width="700" height="10" fill="#181825"/>
    
    <!-- Window buttons -->
    <circle cx="20" cy="17" r="7" fill="#f38ba8"/>
    <circle cx="45" cy="17" r="7" fill="#f9e2af"/>
    <circle cx="70" cy="17" r="7" fill="#a6e3a1"/>
    
    <text x="350" y="22" text-anchor="middle" fill="#6c7086" font-family="monospace" font-size="12">root@embedded ~ kernel module</text>
    
    <!-- Terminal content -->
    <g transform="translate(20, 55)" font-family="monospace" font-size="13">
      <!-- Line 1 -->
      <text y="0" fill="#89b4fa">root@embedded</text>
      <text x="115" y="0" fill="#6c7086">:</text>
      <text x="125" y="0" fill="#89dceb">~/drivers</text>
      <text x="195" y="0" fill="#6c7086">$</text>
      <text x="210" y="0" fill="#cdd6f4">cat gpio_driver.c | head -20</text>
      
      <!-- Code block -->
      <text y="30" fill="#cba6f7">#include</text>
      <text x="70" y="30" fill="#a6e3a1">&lt;linux/module.h&gt;</text>
      <text y="50" fill="#cba6f7">#include</text>
      <text x="70" y="50" fill="#a6e3a1">&lt;linux/fs.h&gt;</text>
      <text y="70" fill="#cba6f7">#include</text>
      <text x="70" y="70" fill="#a6e3a1">&lt;linux/gpio.h&gt;</text>
      
      <text y="100" fill="#6c7086">// Character device file operations</text>
      <text y="120" fill="#f9e2af">static struct</text>
      <text x="105" y="120" fill="#cdd6f4">file_operations fops = {</text>
      <text y="140" fill="#cdd6f4">    .owner   =</text>
      <text x="115" y="140" fill="#fab387">THIS_MODULE</text>
      <text x="205" y="140" fill="#cdd6f4">,</text>
      <text y="160" fill="#cdd6f4">    .open    =</text>
      <text x="115" y="160" fill="#89b4fa">gpio_open</text>
      <text x="185" y="160" fill="#cdd6f4">,</text>
      <text y="180" fill="#cdd6f4">    .read    =</text>
      <text x="115" y="180" fill="#89b4fa">gpio_read</text>
      <text x="185" y="180" fill="#cdd6f4">,</text>
      <text y="200" fill="#cdd6f4">    .write   =</text>
      <text x="115" y="200" fill="#89b4fa">gpio_write</text>
      <text x="195" y="200" fill="#cdd6f4">,</text>
      <text y="220" fill="#cdd6f4">    .release =</text>
      <text x="115" y="220" fill="#89b4fa">gpio_release</text>
      <text x="215" y="220" fill="#cdd6f4">,</text>
      <text y="240" fill="#cdd6f4">};</text>
      
      <!-- Command prompt -->
      <text y="275" fill="#89b4fa">root@embedded</text>
      <text x="115" y="275" fill="#6c7086">:</text>
      <text x="125" y="275" fill="#89dceb">~/drivers</text>
      <text x="195" y="275" fill="#6c7086">$</text>
      <text x="210" y="275" fill="#a6e3a1">insmod gpio_driver.ko</text>
      <rect x="385" y="262" width="10" height="18" fill="#cdd6f4" opacity="0.7">
        <animate attributeName="opacity" values="0.7;0;0.7" dur="1s" repeatCount="indefinite"/>
      </rect>
    </g>
  </g>
  
  <!-- Kernel architecture diagram on right -->
  <g transform="translate(580, 100)">
    <!-- User space -->
    <rect x="0" y="0" width="170" height="50" rx="5" fill="#22c55e" opacity="0.2" stroke="#22c55e" stroke-width="2"/>
    <text x="85" y="20" text-anchor="middle" fill="#22c55e" font-family="monospace" font-size="10" font-weight="bold">USER SPACE</text>
    <text x="85" y="38" text-anchor="middle" fill="#6c7086" font-family="monospace" font-size="9">/dev/gpio_ctrl</text>
    
    <!-- Arrow -->
    <path d="M 85 55 L 85 75" stroke="#64748b" stroke-width="2"/>
    <polygon points="80,75 90,75 85,85" fill="#64748b"/>
    
    <!-- Kernel space -->
    <rect x="0" y="90" width="170" height="80" rx="5" fill="#ef4444" opacity="0.2" stroke="#ef4444" stroke-width="2"/>
    <text x="85" y="110" text-anchor="middle" fill="#ef4444" font-family="monospace" font-size="10" font-weight="bold">KERNEL SPACE</text>
    <text x="85" y="130" text-anchor="middle" fill="#cdd6f4" font-family="monospace" font-size="9">gpio_driver.ko</text>
    <text x="85" y="150" text-anchor="middle" fill="#6c7086" font-family="monospace" font-size="8">Character Device</text>
    
    <!-- Arrow -->
    <path d="M 85 175 L 85 195" stroke="#64748b" stroke-width="2"/>
    <polygon points="80,195 90,195 85,205" fill="#64748b"/>
    
    <!-- Hardware -->
    <rect x="0" y="210" width="170" height="50" rx="5" fill="#f59e0b" opacity="0.2" stroke="#f59e0b" stroke-width="2"/>
    <text x="85" y="230" text-anchor="middle" fill="#f59e0b" font-family="monospace" font-size="10" font-weight="bold">HARDWARE</text>
    <text x="85" y="248" text-anchor="middle" fill="#6c7086" font-family="monospace" font-size="9">GPIO Pins 0-27</text>
  </g>
</svg>
